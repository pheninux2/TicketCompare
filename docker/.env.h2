# ===================================
# Configuration TicketCompare - H2 Database
# ===================================

# ===================================
# MODE DE PERSISTANCE H2
# ===================================

# MODE 1: PERSISTANCE FICHIER (Recommandé - données sauvegardées)
# Les données sont sauvegardées physiquement et conservées après redémarrage
H2_DB_URL=jdbc:h2:file:/app/data/ticketcomparedb;DB_CLOSE_ON_EXIT=FALSE

# MODE 2: EN MÉMOIRE (Données perdues au redémarrage)
# Décommentez la ligne ci-dessous pour activer le mode mémoire
# H2_DB_URL=jdbc:h2:mem:ticketcomparedb;DB_CLOSE_ON_EXIT=FALSE

# ===================================
# CREDENTIALS H2
# ===================================
H2_DB_USERNAME=sa
H2_DB_PASSWORD=

# ===================================
# STRATÉGIE JPA/HIBERNATE
# ===================================

# update : Conserve les données existantes et met à jour le schéma (Recommandé)
JPA_DDL_AUTO=update

# create : Recrée la base à chaque démarrage (PERTE DE DONNÉES)
# JPA_DDL_AUTO=create

# create-drop : Recrée au démarrage et supprime à l'arrêt (PERTE DE DONNÉES)
# JPA_DDL_AUTO=create-drop

# validate : Valide le schéma sans modification (Production)
# JPA_DDL_AUTO=validate

# none : Aucune action (Gestion manuelle)
# JPA_DDL_AUTO=none

# ===================================
# CONFIGURATION SERVEUR
# ===================================
APP_PORT=8080
JAVA_OPTS=-Xmx512m -Xms256m

# ===================================
# NOTES IMPORTANTES
# ===================================
#
# 1. PERSISTANCE DES DONNÉES
#    - Avec H2_DB_URL=jdbc:h2:file:... les données sont SAUVEGARDÉES
#    - Les fichiers sont dans le volume Docker: ticketcompare_h2_data
#    - Les données survivent aux redémarrages
#
# 2. ACCÈS AUX DONNÉES
#    - H2 Console: http://localhost:8080/h2-console
#    - JDBC URL: jdbc:h2:file:/app/data/ticketcomparedb
#    - Username: sa
#    - Password: (vide)
#
# 3. GESTION DES VOLUMES
#    - Voir les volumes: docker volume ls
#    - Supprimer un volume: docker volume rm ticketcompare_h2_data
#    - Backup: docker run --rm -v ticketcompare_h2_data:/data -v $(pwd):/backup busybox tar czf /backup/h2-backup.tar.gz /data
#
# 4. RESET DE LA BASE
#    - Arrêter: docker-compose -f docker/docker-compose-h2.yml down
#    - Supprimer le volume: docker volume rm ticketcompare_h2_data
#    - Redémarrer: docker-compose -f docker/docker-compose-h2.yml up -d
#
# 5. MIGRATION VERS POSTGRESQL
#    - Changer JPA_DDL_AUTO=validate
#    - Exporter les données H2
#    - Utiliser docker-compose.yml (PostgreSQL)
#    - Importer les données
#

